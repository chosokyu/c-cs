#include <Servo.h>

Servo servo1;
Servo servo2;

int i = 0;

const int sw1  = 0;
const int sw2  = 1;

const int Pin1 = 2;
const int Pin2 = 3;
const int Pin3 = 4;
const int Pin4 = 5;
const int Pin5 = 7;
const int Pin6 = 8;

const int PWM1 = 6;

//const int Pin7 = 6;

int val1 = 100;

int swval1 = 0;
int swval2 = 0;

int ans1;
int ans2;

unsigned int sq_timer;
unsigned int sq_mode = 0;



void setup() {
  // put your setup code here, to run once:
  pinMode(Pin1, OUTPUT);
  pinMode(Pin2, OUTPUT);
  pinMode(Pin3, OUTPUT);
  pinMode(Pin4, OUTPUT);
  pinMode(Pin5, OUTPUT);
  pinMode(Pin6, OUTPUT);
  // pinMode(Pin7, OUTPUT);

  pinMode(sw1, INPUT_PULLUP);
  pinMode(sw2, INPUT_PULLUP);

  servo1.attach( 9 );
  servo2.attach( 11 );

  servo1.write( 0 );
  servo2.write( 0 );
}




void Sequence(void)
{
  swval1 = digitalRead(sw1);
  swval2 = digitalRead(sw2);

  ans1 = analogRead(0);
  ans2 = analogRead(1);

  //digitalWrite(Pin7, 1 );

  switch (sq_mode) {
    case 0:



      digitalWrite(Pin1, 0);
      digitalWrite(Pin2, 0);

      if (swval1 == 0) {
        sq_mode = 1;
      }

      break;

    case 1:


      digitalWrite(Pin1, 0);
      digitalWrite(Pin2, 1);

      if (swval1 == 1) {
        sq_mode = 2;
      }
      break;

    case 2:


      digitalWrite(Pin1, 0);
      digitalWrite(Pin2, 0);



      if (swval2 == 0) {
        sq_mode = 3;
      }
      break;

    case 3:

      digitalWrite(Pin3, 0);
      digitalWrite(Pin4, 1);

      if (swval2 == 1) {
        sq_mode = 4;
      }
      break;

    case 4:

      digitalWrite(Pin3, 0);
      digitalWrite(Pin4, 0);

      servo1.write( 60 );
      servo2.write( 60 );

      delay(1000);

      sq_timer = 0;

      sq_mode = 5;
      break;

    case 5:

      val1 = 100 ;

      analogWrite(PWM1, val1);

      servo1.write( 60 );
      servo2.write( 60 );

      digitalWrite(Pin5, 1);
      digitalWrite(Pin6, 0);


      if (sq_timer > 950)
      {

        sq_mode = 6;
      }
      break;

    case 6:


      digitalWrite(Pin5, 0);
      digitalWrite(Pin6, 0);

      sq_timer = 0;

      sq_mode = 9;
      break;

    case 7:

      servo1.write( 60 - sq_timer );
      servo2.write( 60 - sq_timer );

      delay (100);

      if (sq_timer == 60) {
        sq_mode = 8;
      }
      break;

    case 8:

      sq_timer = 0;

      sq_mode = 9;
      break;

    case 9:

      val1 = 250 ;

      analogWrite(PWM1, val1);

      digitalWrite(Pin5, 0);
      digitalWrite(Pin6, 1);


      if (sq_timer > 550)
      {
        sq_mode = 10;
      }
      break;

    case 10:

      digitalWrite(Pin5, 0);
      digitalWrite(Pin6, 0);

      digitalWrite(Pin1, 1);
      digitalWrite(Pin2, 0);

      if (ans1 >= 500) {

        sq_mode = 11;

      }

      break;

    case 11:

      digitalWrite(Pin1, 0);
      digitalWrite(Pin2, 0);

      digitalWrite(Pin3, 1);
      digitalWrite(Pin4, 0);

      if (ans2 >= 500) {
        sq_mode = 12;
      }

      break;

    case 12:

      digitalWrite(Pin3, 0);
      digitalWrite(Pin4, 0);

      sq_mode = 13;
      break;

    case 13:

      servo1.write( 60 );
      servo2.write( 60 );

      sq_mode = 0;
      break;

  }
}


void loop() {
  // put your main code here, to run repeatedly:
  delay(10);//10ms スキャンタイミング

  //1サイクルタイミングごとにカウントアップするカウンタ
  if (sq_timer < (unsigned int) - 1)
  {
    sq_timer++;
  }

  Sequence();
}